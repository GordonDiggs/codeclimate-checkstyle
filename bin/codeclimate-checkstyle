#!/usr/bin/env ruby

STDERR.sync = true
STDOUT.sync = true

$:.unshift(File.expand_path("../lib", File.dirname(__FILE__)))

require "cc/engine/checkstyle"

if File.exist?("/config.json")
  engine_config = JSON.parse(File.read("/config.json"))
else
  engine_config = {}
end

begin
  CC::Engine::Checkstyle.new("/code", engine_config, STDOUT).run
rescue => e
  abort e.message
end
